<div class="container">
  <div class="form-container">
    <div class="form-header">
      <h2>Modifier un Cours</h2>
    </div>

    <form (ngSubmit)="updateCours()">
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">ID Cours</label>
          <input type="text" [(ngModel)]="currentCours.id" name="id" class="form-control-modern" readonly>
        </div>
        
        <div class="form-group">
          <label class="form-label">Titre du Cours</label>
          <input type="text" [(ngModel)]="currentCours.title" name="title" class="form-control-modern">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Contenu du Cours</label>
          <textarea [(ngModel)]="currentCours.content" name="content" class="form-control-modern"></textarea>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Durée (en heures)</label>
          <input type="number" [(ngModel)]="currentCours.duration" name="duration" class="form-control-modern">
        </div>
        
        <div class="form-group">
          <label class="form-label">URL de la vidéo</label>
          <input type="text" [(ngModel)]="currentCours.videoUrl" name="videoUrl" class="form-control-modern">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Matière</label>
          <select class="select-modern" id="idMatiere" name="idMatiere" [(ngModel)]="updatedMatiereId">
            <option *ngFor="let matiere of matieres" [value]="matiere.id">
              {{matiere.name}}
            </option>
          </select>
        </div>
      </div>

      <!-- Image Upload -->
      <div class="form-row">
        <div class="form-group">
          <label class="mb-2">Image :</label>
          <input type="file" (change)="onImageUpload($event)" class="form-control">
        </div>
      </div>

      <!-- Image Preview -->
      <div class="form-row">
        <div class="form-group">
          <img [src]="myImage" class="card-img-top img-fluid rounded-start" style="width: 500px; height: 300px" />
        </div>
      </div>

    </form>

    <!-- Button to Add New Image -->
    <div class="mt-2">
      <button type="submit" (click)="onAddImageCours()" class="btn btn-success">
        <i class="fas fa-plus-circle"></i> Ajouter Image
      </button>
    </div>

    <!-- List of Images for the Course -->
    <div class="card shadow mb-4 mt-3">
      <div class="card-body">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Images</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let img of currentCours.images">
              <td><img class="card-img-top img-responsive"  
                src = "{{'data:' + img.type + ';base64,' + img.image}}"  
                style = "height :50px;width:100px">
              </td> 
              <td style="width: 20%;">
                <button class="btn btn-danger" (click)="supprimerImage(img)">
                  Supprimer
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="mt-2">
      <button type="submit" (click)="updateCours()" class="btn-modern btn-modern-success" ><i class="fas fa-save"></i>Modifier</button> <!-- Removed click event -->
  </div>
  </div>
</div>
